<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Comprobante de Viaje</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    
    <style>
        body { background-color: #e9ecef; }
        .ticket { 
            border: 2px dashed #333; 
            padding: 30px; 
            background-color: #ffffff; 
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .footer-credits { font-size: 0.85rem; }
    </style>
</head>
<body>

<div class="container mt-5 mb-5">
    <div class="row justify-content-center">
        <div class="col-md-6 ticket">
            <h2 class="text-center text-uppercase font-weight-bold">Ticket de Viaje</h2>
            <p class="text-center text-muted small">Listovoy - Viaje Seguro</p>
            <hr>
            
            <div class="row">
                <div class="col-6">
                    <p><strong>ID Viaje:</strong> <span th:text="${viaje.viajeId}"></span></p>
                </div>
                <div class="col-6 text-right">
                    <p><strong>Fecha:</strong> <span th:text="${#temporals.format(viaje.fechaViaje, 'dd/MM/yyyy')}"></span></p>
                </div>
            </div>
            
            <p><strong>Tipo de Distancia:</strong> <span class="badge badge-info" th:text="${viaje.tipoDistancia}"></span></p>
            
            <hr>
            
            <div class="mb-4">
                <h5 class="font-weight-bold">Detalles de las Partes</h5>
                <p class="mb-1"><strong>Pasajero:</strong> <span th:text="${usuario.nombre + ' ' + usuario.apellido}"></span></p>
                <p class="mb-1"><strong>Vehículo:</strong> <span th:text="${vehiculo.marca + ' ' + vehiculo.modelo + ' (' + vehiculo.patente + ')'}"></span></p>
                <p class="mb-1"><strong>Categoría:</strong> <span class="badge badge-dark" th:text="${vehiculo.tipoVehiculo}"></span></p>
            </div>
            
            <div th:if="${conductor != null}" class="bg-light p-2 rounded">
                <h5 class="font-weight-bold">Conductor Asignado</h5>
                <p class="mb-1"><strong>Nombre:</strong> <span th:text="${conductor.nombre + ' ' + conductor.apellido}"></span></p>
                <p class="mb-1"><strong>Contacto:</strong> <span th:text="${conductor.email}"></span></p>
            </div>
            <div th:unless="${conductor != null}" class="alert alert-warning p-2">
                <i class="bi bi-exclamation-triangle"></i> <small>Vehículo sin conductor asignado</small>
            </div>

            <hr>

            <div class="text-right small text-muted">
                <p class="mb-0">Precio Base: $<span th:text="${viaje.tipoDistancia == 'LARGA' ? '20.000,00' : '7.000,00'}"></span></p>
                <p class="mb-0" th:if="${vehiculo.tipoVehiculo.contains('Luxe')}">Recargo Luxe: +10%</p>
                <p class="mb-0" th:if="${vehiculo.tipoVehiculo.contains('Premium')}">Recargo Premium: +20%</p>
            </div>
            
            <h3 class="text-right text-success font-weight-bold">
                Total: $<span th:text="${#numbers.formatDecimal(viaje.costoFinal, 1, 2, 'COMMA')}">0.00</span>
            </h3>

            <div class="text-center mt-4 no-print">
                <a th:href="@{/viaje/seleccionarUsuario}" class="btn btn-primary">
                    <i class="bi bi-plus-circle"></i> Nuevo Viaje
                </a>
                <button onclick="window.print()" class="btn btn-outline-dark">
                    <i class="bi bi-printer"></i> Imprimir
                </button>
            </div>
        </div>
    </div>

    <div class="text-center mt-4">
        <a th:href="@{/}" class="btn btn-secondary shadow-sm">
            <i class="bi bi-arrow-left-circle"></i> Volver al Inicio
        </a>
    </div>
</div>

<footer class="navbar navbar-light bg-light py-3 border-top mt-5">
    <div class="container-fluid text-center">
        <span class="navbar-text mx-auto text-muted footer-credits">
            <strong>Desarrollado por:</strong> Ortega Daiana & Meriles Walter
        </span>
    </div>
</footer>

</body>
</html>